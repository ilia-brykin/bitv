{"version":3,"file":"chunk.570.1e6e33d72615cd39643a.js","mappings":"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","sources":["webpack://bitv/./src/views/PageTest/PageTest.pug","webpack://bitv/./src/views/PageTest/PageTest.js","webpack://bitv/./src/views/PageTest/compositionAPI/ModelAPI.js","webpack://bitv/./src/views/PageTest/compositionAPI/DataFormAPI.js","webpack://bitv/./src/views/PageTest/PageTest.vue"],"sourcesContent":["<div><h1>Test</h1><a-form v-model=\"model\" :data=\"dataForm\"></a-form><a-element class=\"a_mt_3 a_btn a_btn_primary\" type=\"button\" text=\"Parse HTML\" @click=\"parseHtml\"></a-element><pre class=\"a_mt_3\">{{ json }}</pre><pre class=\"a_mt_5\">{{ jsonStepInfo }}</pre></div>","import AElement from \"aloha-vue/src/AElement/AElement\";\nimport AForm from \"aloha-vue/src/ui/AForm/AForm\";\n\nimport DataFormAPI from \"./compositionAPI/DataFormAPI\";\nimport ModelAPI from \"./compositionAPI/ModelAPI\";\n\nexport default {\n  name: \"PageTest\",\n  components: {\n    AElement,\n    AForm,\n  },\n  setup() {\n    const {\n      json,\n      jsonStepInfo,\n      model,\n      parseHtml,\n    } = ModelAPI();\n\n    const {\n      dataForm,\n    } = DataFormAPI();\n\n    return {\n      dataForm,\n      json,\n      jsonStepInfo,\n      model,\n      parseHtml,\n    };\n  },\n};\n","import {\n  ref,\n} from \"vue\";\n\nimport {\n  forEach,\n} from \"lodash-es\";\n\nexport default function ModelAPI() {\n  const json = ref({});\n  const jsonStepInfo = ref({});\n  const model = ref({\n    html: \"\",\n  });\n  const rubricsInfo = [\n    {\n      id: \"_was_wird_geprüft-heading\",\n      keyTranslation: \"WHAT_CHECKED\",\n      key: \"whatChecked\",\n    },\n    {\n      id: \"_warum_wird_das_geprüft-heading\",\n      keyTranslation: \"WHY_CHECKED\",\n      key: \"whyChecked\",\n    },\n    {\n      id: \"_wie_wird_geprüft-heading\",\n      keyTranslation: \"HOW_CHECKED\",\n      key: \"howChecked\",\n    },\n    {\n      id: \"_quellen-heading\",\n      keyTranslation: \"SOURCES\",\n      key: \"sources\",\n    },\n    {\n      id: \"_einordnung_des_prüfschritts-heading\",\n      keyTranslation: \"CLASSIFICATION\",\n      key: \"classification\",\n    },\n    {\n      id: \"_fragen_zu_diesem_prüfschritt-heading\",\n      keyTranslation: \"QUESTIONS\",\n      key: \"questions\",\n    },\n  ];\n  const tagsTranslate = {\n    P: true,\n    H3: true,\n    H4: true,\n    H5: true,\n    H6: true,\n    OL: true,\n    UL: true,\n  };\n\n  const createElementFromHTML = htmlString => {\n    const div = document.createElement(\"div\");\n    div.innerHTML = htmlString.trim();\n\n    return div.firstChild;\n  };\n\n  const getStepName = ({ HTML }) => {\n    const ELEMENT = HTML.querySelector(\".Checkpoint__heading-large.Heading--h2\");\n    if (!ELEMENT) {\n      return undefined;\n    }\n\n    return ELEMENT.innerText.trim() ;\n  };\n\n  const getStepKey = ({ HTML }) => {\n    const ELEMENT = HTML.querySelector(\".Checkpoint__heading-small.Heading--h3\");\n    if (!ELEMENT) {\n      return undefined;\n    }\n\n    return ELEMENT.innerText.replace(\"Prüfschritt\", \"\").trim().replaceAll(\".\", \"_\").toUpperCase();\n  };\n\n  const parseChildren = ({ children, KEY_PREFIX, JSON, objIndex, rubric, JSON_STEP_INFO }) => {\n    forEach(children, child => {\n      if (tagsTranslate[child.tagName] ||\n        (child.tagName === \"DIV\" && child.hasAttribute(\"lang\"))) {\n        const KEY_TRANSLATE = `${ KEY_PREFIX }${ objIndex.index }_`;\n        child.removeAttribute(\"class\");\n        child.removeAttribute(\"role\");\n        child.removeAttribute(\"aria-level\");\n        if (child.hasAttribute(\"lang\")) {\n          child.classList.add(\"a_ml_5\");\n        }\n        JSON[KEY_TRANSLATE] = child.outerHTML.replaceAll(\"&nbsp;\", \" \").replaceAll(\"\\n\", \" \");\n        JSON_STEP_INFO[rubric.key] = objIndex.index;\n        objIndex.index++;\n      } else {\n        const currentChildren = child.children;\n        parseChildren({\n          children: currentChildren,\n          KEY_PREFIX,\n          JSON,\n          objIndex,\n          rubric,\n          JSON_STEP_INFO,\n        });\n      }\n    });\n  };\n\n  const getRubricJson = ({ JSON, JSON_STEP_INFO, rubric, HTML, STEP_KEY }) => {\n    const ELEMENT = HTML.querySelector(`#${ rubric.id }`);\n    const objIndex = {\n      index: 1,\n    };\n    if (!ELEMENT) {\n      JSON_STEP_INFO[rubric.key] = 0;\n      return undefined;\n    }\n\n    const PARENT = ELEMENT.parentElement;\n    const CONTENT = PARENT.querySelector(\".Collapsible__content\");\n    if (!CONTENT) {\n      return undefined;\n    }\n\n    const KEY_PREFIX = `_STEP_${ STEP_KEY }_${ rubric.keyTranslation }_`;\n    const children = CONTENT.children;\n    parseChildren({\n      children,\n      KEY_PREFIX,\n      JSON,\n      objIndex,\n      rubric,\n      JSON_STEP_INFO,\n    });\n  };\n\n  const parseHtml = () => {\n    if (!model.value.html) {\n      return;\n    }\n    const JSON = {};\n    const JSON_STEP_INFO = {};\n\n    const HTML = createElementFromHTML(model.value.html);\n    const STEP_KEY = getStepKey({ HTML });\n\n    JSON[`_STEP_${ STEP_KEY }_NAME_`] = getStepName({ HTML });\n    forEach(rubricsInfo, rubric => {\n      getRubricJson({\n        JSON,\n        JSON_STEP_INFO,\n        rubric,\n        HTML,\n        STEP_KEY,\n      });\n    });\n\n    json.value = JSON;\n    jsonStepInfo.value = JSON_STEP_INFO;\n  };\n\n  return {\n    json,\n    jsonStepInfo,\n    model,\n    parseHtml,\n  };\n}\n","export default function DataFormAPI() {\n  const dataForm = [\n    {\n      type: \"textarea\",\n      label: \"HTML\",\n      id: \"html\",\n    },\n  ];\n\n  return {\n    dataForm,\n  };\n}\n","import { render } from \"./PageTest.pug?vue&type=template&id=17b8adfe&lang=pug&external\"\nimport script from \"./PageTest.js?vue&type=script&lang=js&external\"\nexport * from \"./PageTest.js?vue&type=script&lang=js&external\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","name","components","AElement","AForm","setup","json","jsonStepInfo","model","parseHtml","html","rubricsInfo","id","keyTranslation","key","tagsTranslate","P","H3","H4","H5","H6","OL","UL","parseChildren","children","KEY_PREFIX","JSON","objIndex","rubric","JSON_STEP_INFO","forEach","child","tagName","hasAttribute","KEY_TRANSLATE","index","removeAttribute","classList","add","outerHTML","replaceAll","currentChildren","value","HTML","htmlString","div","document","createElement","innerHTML","trim","firstChild","createElementFromHTML","STEP_KEY","ELEMENT","querySelector","innerText","replace","toUpperCase","getStepKey","getStepName","CONTENT","parentElement","getRubricJson","ModelAPI","dataForm","type","label","data","text"],"sourceRoot":""}